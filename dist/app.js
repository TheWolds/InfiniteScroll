!function(n){var o={};function r(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=n,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);var o,r,i=function(e){console.log(e)},l=function(e,t){return e||i("선택자를 넣어주세요"),"string"!=typeof e&&i("선택자가 문자열이 아닙니다."),t||(t=document),"#"===e[0]?(t!==document&&i("해당 parent는 getElementById를 사용할 수 없습니다."),document.getElementById(e.slice(1))):t.querySelector(e)};function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=(r=o=function e(t){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"setScroll",function(e){var t=e.rowHeight,n=e.templateHTML,o=e.dataList,r=void 0===o?[]:o;a.isScrollDown=!0,a.lastScrollTop=0,a.lastRowIndex=-1,a.cachedItems=[],a.rowHeight=t,a.templateHTML=n,a.dataList=r,a.parent.style.position="relative",a.component.scrollTop=0,a.visibleRowCount=Math.ceil(a.component.clientHeight/a.rowHeight);var l=Math.max(a.visibleRowCount,20);a.preparedRowCount=l+l%2,component.removeEventListener("scroll",a.handleScrollEvent),component.addEventListener("scroll",a.handleScrollEvent),a.handleScroll()}),c(this,"handleScrollEvent",function(){requestAnimationFrame(function(){a._handleScrollEvent()})}),c(this,"_handleScrollEvent",function(){var e,t=a.component.scrollTop;a.isScrollDown=t>a.lastScrollTop,e=a.isScrollDown?a.handleScrollDown:a.handleScrollUp,a.lastScrollTop=t,e()}),c(this,"handleScrollDown",function(){var e=a.cachedItems[a.cachedItems.length-1],t=e.getBoundingClientRect(),n=a.component.getBoundingClientRect();if(t.bottom<0)parseInt(e.dataset.index,10)+1<a.dataList.length&&a.handleScroll();else if(t.bottom<n.bottom+5*a.rowHeight){var o=parseInt(e.dataset.index,10)+1,r=o+a.preparedRowCount;a.render(o,r,!0)}}),c(this,"handleScrollUp",function(){var e=a.cachedItems[0],t=e.getBoundingClientRect(),n=a.component.getBoundingClientRect();if(t.top>n.bottom)a.handleScroll();else if(t.top>n.top-5*a.rowHeight){var o=parseInt(e.dataset.index,10),r=o-a.preparedRowCount;a.render(r,o)}}),c(this,"handleScroll",function(){var e=Math.floor(a.component.scrollTop/a.rowHeight),t=e-a.preparedRowCount/2,n=e+a.visibleRowCount+a.preparedRowCount/2;a.render(t,n)}),c(this,"render",function(e,t){var n=a.dataList.length;if(e<0&&(e=0),n<t&&(t=n),!(n<=e||0===n||t<=0)){var o,r=a.getListHTML(e,t-e),l=("string"!=typeof(o=r)&&i("html 문자열이 아닙니다."),document.createRange().createContextualFragment(o));a.append(l);var c=a.cachedItems[a.cachedItems.length-1].dataset.index;c>a.lastRowIndex&&(console.log(c,a.lastRowIndex),a.lastRowIndex=c,a.parent.style.height=a.lastRowIndex*a.cachedItems[a.cachedItems.length-1].offsetHeight+"px")}}),c(this,"remove",function(e,t){for(var n=e;n<=t;n++)a.parent.removeChild(a.cachedItems[n])}),c(this,"append",function(e){a.isScrollDown?a.parent.appendChild(e):a.parent.insertBefore(e,a.parent.children[0]),a.cachedItems=a.parent.querySelectorAll(a.itemSelector),a.update()}),c(this,"update",function(){var e,t;a.isScrollDown?(t=a.cachedItems[0].getBoundingClientRect().top-a.component.getBoundingClientRect().top)<0&&0<(e=Math.floor(Math.abs(t)/a.rowHeight)-a.preparedRowCount)&&(a.remove(0,e),a.cachedItems=a.parent.querySelectorAll(a.itemSelector)):0<(t=a.cachedItems[a.cachedItems.length-1].getBoundingClientRect().bottom-a.component.getBoundingClientRect().bottom)&&0<(e=Math.floor(t/a.rowHeight)-a.preparedRowCount)&&(a.remove(a.cachedItems.length-1-e,a.cachedItems.length-1),a.cachedItems=a.parent.querySelectorAll(a.itemSelector))}),c(this,"getListHTML",function(e,t){console.log(e);for(var n="",o=e;o<e+t;o++)n+=a.templateHTML(a.rowHeight,o,a.dataList[o]);return n});var n=t.component,o=t.parent,r=t.itemSelector;this.component=l(n),this.parent=l(o),this.itemSelector=r},c(o,"setScroll",function(e,t){return new a(e).setScroll(t)}),r),s=a,d=(n(0),function(e,t,n){return console.log(e,t,n),'<li class="item" style="position:absolute; top:'.concat(t*e,'px;" data-index=').concat(t,">\n        ").concat(n.title,"\n    </li>")});document.addEventListener("DOMContentLoaded",function(){fetch("https://jsonplaceholder.typicode.com/posts").then(function(e){if(200===e.status)return e.json();throw new Error("Error")}).then(function(e){s.setScroll({component:"#component",parent:"#list-body",itemSelector:".item"},{dataList:e,rowHeight:50,templateHTML:d})})})}]);