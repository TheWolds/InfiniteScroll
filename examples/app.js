!function(n){var o={};function r(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=n,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);var o,r,a=function(e){console.log(e)},d=function(e,t){return e||a("선택자를 넣어주세요"),"string"!=typeof e&&a("선택자가 문자열이 아닙니다."),t||(t=document),"#"===e[0]?(t!==document&&a("해당 parent는 getElementById를 사용할 수 없습니다."),document.getElementById(e.slice(1))):t.querySelector(e)};function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=(r=o=function e(){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"setScroll",function(e){var t=e.componentSelector,n=e.parentSelector,o=e.rowSelector,r=e.rowHeight,l=e.templateHTML,c=e.dataList,a=void 0===c?[]:c;s.component=d(t),s.parent=d(n),s.rowSelector=o,s.isScrollDown=!0,s.lastScrollTop=0,s.lastRowIndex=-1,s.cachedItems=[],s.rowHeight=r,s.templateHTML=l,s.dataList=a,s.parent.style.position="relative",s.component.scrollTop=0,s.visibleRowCount=Math.ceil(s.component.clientHeight/s.rowHeight);var i=Math.max(s.visibleRowCount,20);s.preparedRowCount=i+i%2,s.component.removeEventListener("scroll",s.handleScrollEvent),s.component.addEventListener("scroll",s.handleScrollEvent),s.handleScroll()}),l(this,"handleScrollEvent",function(){requestAnimationFrame(function(){s._handleScrollEvent()})}),l(this,"_handleScrollEvent",function(){var e,t=s.component.scrollTop;s.isScrollDown=t>s.lastScrollTop,e=s.isScrollDown?s.handleScrollDown:s.handleScrollUp,s.lastScrollTop=t,e()}),l(this,"handleScrollDown",function(){var e=s.cachedItems[s.cachedItems.length-1],t=e.getBoundingClientRect(),n=s.component.getBoundingClientRect();if(t.bottom<0)parseInt(e.dataset.index,10)+1<s.dataList.length&&s.handleScroll();else if(t.bottom<n.bottom+5*s.rowHeight){var o=parseInt(e.dataset.index,10)+1,r=o+s.preparedRowCount;s.render(o,r,!0)}}),l(this,"handleScrollUp",function(){var e=s.cachedItems[0],t=e.getBoundingClientRect(),n=s.component.getBoundingClientRect();if(t.top>n.bottom)s.handleScroll();else if(t.top>n.top-5*s.rowHeight){var o=parseInt(e.dataset.index,10),r=o-s.preparedRowCount;s.render(r,o)}}),l(this,"handleScroll",function(){var e=Math.floor(s.component.scrollTop/s.rowHeight),t=e-s.preparedRowCount/2,n=e+s.visibleRowCount+s.preparedRowCount/2;s.render(t,n)}),l(this,"render",function(e,t){var n=s.dataList.length;if(e<0&&(e=0),n<t&&(t=n),!(n<=e||0===n||t<=0)){var o,r=s.getListHTML(e,t-e),l=("string"!=typeof(o=r)&&a("html 문자열이 아닙니다."),document.createRange().createContextualFragment(o));s.append(l);var c=s.cachedItems[s.cachedItems.length-1].dataset.index;c>s.lastRowIndex&&(s.lastRowIndex=c,s.parent.style.height=s.lastRowIndex*s.cachedItems[s.cachedItems.length-1].offsetHeight+"px")}}),l(this,"remove",function(e,t){for(var n=e;n<=t;n++)s.parent.removeChild(s.cachedItems[n])}),l(this,"append",function(e){s.isScrollDown?s.parent.appendChild(e):s.parent.insertBefore(e,s.parent.children[0]),s.cachedItems=s.parent.querySelectorAll(s.rowSelector),s.update()}),l(this,"update",function(){var e,t;s.isScrollDown?(t=s.cachedItems[0].getBoundingClientRect().top-s.component.getBoundingClientRect().top)<0&&0<(e=Math.floor(Math.abs(t)/s.rowHeight)-s.preparedRowCount)&&(s.remove(0,e),s.cachedItems=s.parent.querySelectorAll(s.rowSelector)):0<(t=s.cachedItems[s.cachedItems.length-1].getBoundingClientRect().bottom-s.component.getBoundingClientRect().bottom)&&0<(e=Math.floor(t/s.rowHeight)-s.preparedRowCount)&&(s.remove(s.cachedItems.length-1-e,s.cachedItems.length-1),s.cachedItems=s.parent.querySelectorAll(s.rowSelector))}),l(this,"getListHTML",function(e,t){console.log(e);for(var n="",o=e;o<e+t;o++)n+=s.templateHTML(s.rowHeight,o,s.dataList[o]);return n})},l(o,"setScroll",function(e){return(new c).setScroll(e)}),r),i=c,s=(n(0),function(e,t,n){return'<li class="item" style="position:absolute; top:'.concat(t*e,'px;" data-index=').concat(t,">\n        ").concat(n.email,"\n    </li>")});document.addEventListener("DOMContentLoaded",function(){fetch("https://jsonplaceholder.typicode.com/comments").then(function(e){if(200===e.status)return e.json();throw new Error("Error")}).then(function(e){i.setScroll({componentSelector:"#component",parentSelector:"#list",rowSelector:".item",dataList:e,rowHeight:50,templateHTML:s})})})}]);